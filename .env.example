# Lumina Configuration
# Copy this file to .env and customize for your environment

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Path to catalog database storage (on host machine)
# This is where Lumina stores its PostgreSQL database
# Recommend: Fast local SSD for best performance
# Example: /mnt/storage/lumina-catalog
CATALOG_PATH=/path/to/catalog

# Path to your photo library (on host machine)
# Mounted read-only inside container
# Can be network storage (NAS)
# Example: /mnt/storage/photos
PHOTOS_PATH=/path/to/photos

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Number of CPU cores for parallel processing
# Default: Auto-detect (all cores)
# Recommendations:
#   Small libraries (<10k images): 4-8
#   Medium libraries (10k-100k): 16-32
#   Large libraries (>100k): 32-64
WORKERS=32

# Number of Celery background workers
# Default: 4
# Each worker uses ~2GB RAM
# Recommendations:
#   Light usage: 2-4
#   Medium usage: 4-8
#   Heavy usage: 8-16
CELERY_WORKERS=4

# Enable GPU acceleration (20-30x faster processing)
# Requires: nvidia-docker2 installed
# Default: true
ENABLE_GPU=true

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection details
# These settings work for the Docker deployment
# Only change if connecting to external database
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=lumina
POSTGRES_USER=lumina

# IMPORTANT: Change this password for production!
POSTGRES_PASSWORD=buffalo-jump

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Redis connection details
# These settings work for the Docker deployment
REDIS_HOST=localhost
REDIS_PORT=6379

# Celery broker and result backend URLs
# PostgreSQL is used for result backend (chord support)
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=db+postgresql://lumina:buffalo-jump@localhost:5432/lumina

# ============================================================================
# WEB SERVER CONFIGURATION
# ============================================================================

# Web UI port (external access)
# Default: 8765
# Access at: http://localhost:8765
WEB_PORT=8765

# Web server host binding
# 0.0.0.0 = Allow network access
# 127.0.0.1 = Localhost only (more secure)
WEB_HOST=0.0.0.0

# ============================================================================
# GPU CONFIGURATION (Advanced)
# ============================================================================

# NVIDIA MPS (Multi-Process Service) directories
# Only relevant if using GPU acceleration
# Default values should work for most setups
CUDA_MPS_PIPE_DIRECTORY=/tmp/nvidia-mps
CUDA_MPS_LOG_DIRECTORY=/tmp/nvidia-log

# ============================================================================
# ANALYSIS CONFIGURATION (Advanced)
# ============================================================================

# Duplicate detection similarity threshold
# Lower = stricter matching (0-3: very strict, 4-6: recommended, 7-10: loose)
# Default: 5
SIMILARITY_THRESHOLD=5

# Automatically select best quality duplicate
# Default: true
AUTO_SELECT_BEST=true

# ============================================================================
# LOGGING (Advanced)
# ============================================================================

# Log verbosity
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Default: INFO (use DEBUG for troubleshooting)
LOG_LEVEL=INFO

# ============================================================================
# NOTES
# ============================================================================
# 1. Use absolute paths for CATALOG_PATH and PHOTOS_PATH
# 2. Change POSTGRES_PASSWORD for production deployments
# 3. Don't commit .env file to git (it's in .gitignore)
# 4. See docs/deployment/CONFIGURATION.md for complete reference
